name: üõ†Ô∏è GameOps Lab - Cross Platform Builds

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build-linux:
    uses: vladbelo2/gameops-lab/.github/workflows/build_game/linux-build.yml@main
    strategy:
      matrix:
        game: [tetris, snake, brick_breaker]
    with:
      game_name: ${{ matrix.game }}
    secrets: inherit

  build-windows:
    uses: vladbelo2/gameops-lab/.github/workflows/build_game/windows-build.yml@main
    strategy:
      matrix:
        game: [tetris, snake, brick_breaker]
    with:
      game_name: ${{ matrix.game }}
    secrets: inherit

  build-macos-intel:
    uses: vladbelo2/gameops-lab/.github/workflows/build_game/macos-build.yml@main
    strategy:
      matrix:
        game: [tetris, snake, brick_breaker]
    with:
      game_name: ${{ matrix.game }}
      arch: "intel"
    secrets: inherit

  build-macos-arm64:
    uses: vladbelo2/gameops-lab/.github/workflows/build_game/macos-build.yml@main
    strategy:
      matrix:
        game: [tetris, snake, brick_breaker]
    with:
      game_name: ${{ matrix.game }}
      arch: "arm64"
    secrets: inherit
